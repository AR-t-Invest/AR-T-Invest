<!DOCTYPE html>
<html>
  <head>
    <!-- Import A-Frame, p5js and ARjs Frameworks 
      https://aframe.io/
      https://p5js.org/
      https://ar-js-org.github.io/AR.js-Docs/
      -->
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.min.js"></script>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script>
      // Custom A-Frame component fetching Corona-API data
      let requestData;
      let loaded = false;
      AFRAME.registerComponent("corona-api", {
        init: function () {
          
          // Get Covid case numbers for the past nine days from API:
          // read the API documentation, try it out in the browser, write the code.
          // API doc: https://api.corona-zahlen.org/docs/endpoints/germany.html#germany-history-cases-days
          
          let requestURL =
            "https://api.corona-zahlen.org/germany/history/cases/9";
          let request = new XMLHttpRequest();
          request.open("GET", requestURL);
          request.responseType = "json";
          request.send();
          request.onload = function () {
            requestData = request.response;
            loaded = true;
          };
        },
        tick: function () {
          let el = this.el;
          if (loaded == true) {
            el.setAttribute(
              "value",
              "Temperatur: " +
                123
            );
          }
        },
      });
    </script>
  </head>

  <body style="margin: 0px; overflow: hidden">
    <a-scene embedded arjs>
      <a-marker preset="hiro">
        <a-text
          corona-api
          value="Corona cases"
          position="0 0 1"
          rotation="-90 0 0"
          color="#FFFFFF"
          align="right"
        ></a-text>
        <a-entity
          id="p5Canvas"
          geometry="primitive: box"
          material=""
          side="double"
          rotation="0 0 0"
          position="0 0 0"
        ></a-entity>
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>
  </body>
  <script src="sketch.js"></script>
</html>
